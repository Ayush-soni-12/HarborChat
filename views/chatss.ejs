<%- include('partials/header') %>
        <div class="message">
             <button id="btn">All</button>
              <button id="btn">Unread</button>
               <button id="btn">Group</button>
                <button id="btn">Favorites</button>
        </div>
<div class="contact-list" id="contactList">
    <% if (contacts && contacts.length > 0) { %>
        <% contacts.forEach(contact => { %>
            <div class="contact-item" data-userid="<%=contact.contactId._id%>">
            <div class="contact-avatar">
              <% if (contact.contactId.image) { %>
                <img src="<%= contact.contactId.image %>" alt="<%= contact.name.charAt(0) %>" />
              <% } else { %>
                <%= contact.name.charAt(0) %>
              <% } %>
            </div>
                <div class="contact-info">
                    <div class="contact-name"><%= contact.name %></div>
                    <div class="contact-last-msg contact-phone"><%= contact.phone %></div>
                     <div class="contact-last-message"><%= contact.lastMessage ? contact.lastMessage : '' %></div>
                    <div class="contact-about" style="display: none;"><%=contact.contactId.about%></div>
                    
                </div>
                <% if (contact.unreadCount && contact.unreadCount > 0) { %>
                  <span class="unread-badge"><%= contact.unreadCount %></span>
                <% } %>
            </div>
        <% }) %>
    <% } %>
<!-- </div> -->

<!-- GROUP SECTION -->
<!-- <div class="group-list contact-list" id="groupList contactList"> -->
  <% if (groups && groups.length > 0) { %>
    <% groups.forEach(group => { %>
      <div class="group-item" data-groupid="<%= group._id %>" data-type="group">
        <div class="group-avatar contact-avatar"><%= group.name.charAt(0) %></div>
        <div class="group-info contact-info">
          <div class="group-name contact-name"><%= group.name %></div>
          <div class="group-last-message contact-last-msg"><%= group.lastMessage || '' %></div>
        </div>
          <% if (group.unreadCount && group.unreadCount > 0) { %>
            <span class="unread-badge"><%= group.unreadCount %></span>
          <% } %>


      </div>
    <% }) %>
  <% } %>
</div>


<div class="empty" id="emptyChatMsg" <% if (contacts && contacts.length > 0) { %>style="display:none"<% } %>>
    <div class="empty-chat-icon">
        <i class="fas fa-users"></i>
    </div>
    <p>No contacts yet</p>
    </div>
    </div>
        <!-- Add this just before </body> -->
<div class="user-info-overlay" id="userInfoOverlay"></div>
    <div class="user-info" id="userInfoSidebar">
        <div class="crossEdit">
            <div class="crossbtn">
                <i class="fa-solid fa-xmark"></i>
            </div>
            <div class="editbtn">
                <i class="fa-solid fa-pencil"></i>
            </div>
        </div>

        <div id="contact-details-panel" class="contact-details-panel">
            <p>Select a contact or group to view details</p>
        </div>
    </div>



 <!--  for group creation  -->
  <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
    <div class="modal-content">
      <div class="modal-header">
        <h1 class="modal-title fs-5" id="exampleModalLabel"><i class="fas fa-users me-2"></i>Create Group</h1>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body" id="createGroupModal">
        <div class="mb-3">
          <label for="groupName" class="form-label fw-semibold">Group Name</label>
          <input type="text" class="form-control" id="groupName" placeholder="Enter group name">
        </div>
        
        <div class="mb-3">
          <label for="groupDescription" class="form-label fw-semibold">Description</label>
          <textarea class="form-control" id="groupDescription" placeholder="What's this group about?"></textarea>
        </div>
        
        <h4><i class="fas fa-user-plus me-2"></i>Select Members:</h4>
         <div id="contactListForGroup">
      <% if (contacts && contacts.length > 0) { %>
      <% contacts.forEach(contact => { %>
        <div class="contact-select">
          <label>
            <input type="checkbox" value="<%= contact.contactId._id %>">
            <%= contact.name %> (<%= contact.phone %>)
          </label>
        </div>
      <% }) %>
    <% } else { %>
      <p>No contacts available to add.</p>
    <% } %>
  </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" id="cancelGroupBtn" data-bs-dismiss="modal">Cancel</button>
        <button type="button"  id="saveGroupBtn" class="btn btn-success">Create Group</button>
      </div>
    </div>
  </div>
</div>

   <%- include('partials/footer') %>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
    <script type="module" src="https://cdn.jsdelivr.net/npm/emoji-picker-element@^1/index.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fabric.js/5.3.0/fabric.min.js"></script>
    <script src="/socket.io/socket.io.js"></script>
    <script type="module" src="/js/main.js"></script>
    <script type="module" src="/js/footer.js"></script>
    <script src="/js/socket.js"></script>


</body>
</html>
   
  