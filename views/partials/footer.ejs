<!-- Chat Area -->
    <div class="chat-area" id="chatArea">
        <div class="empty-chat">
            <div class="empty-chat-icon">
                <i class="fas fa-comment-dots"></i>
            </div>
            <h2>HarborChat Web</h2>
            <p>Select a chat to start messaging</p>
        </div>

 <!--  personal chat  -->
        <!-- ...existing code... -->
         <div class="chattingArea">
<div class="chat">
    <div class="nav">
        <div class="info">

                <div class="nav-item">
                    <div class="nav-avatar"></div>
                    <div class="nav-info">
                        <div class="nav-name" id="chatName"></div>
                          <span class="user-status">Offline</span> 
                    </div>
                </div>

        </div>

<div id="secretStatus" style="display: none;">
  Secret Chat Active - <span id="secretTimer">05:00</span>
</div>

        <div class="dotIcon">
            <span>
  <div class="dropdown" style="display: inline-block;">
  <!-- <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton2" data-bs-toggle="dropdown" aria-expanded="false"> -->
     <i class="fas fa-ellipsis-v" data-bs-toggle="dropdown"aria-expanded="false"></i>
  <!-- </button> -->
  <ul class="dropdown-menu dropdown-menu-white iconImage" aria-labelledby="dropdownMenuButton2">
    <li class="userinfo"><a class="dropdown-item"><i class="fas fa-user-plus"></i> Contact info</a></li>
    <li><a class="dropdown-item" href="#"><i class="fa-regular fa-star"></i> Selected Messages</a></li>
    <li><a class="dropdown-item" href="#"><i class="fa-solid fa-bell-slash"></i>  Mute notifications</a></li>
    <li><a class="dropdown-item" href="#"><i class="fa-regular fa-square-check"></i>  Disappearing messages</a></li>
    <li><a class="dropdown-item" href="#"><i class="fa-regular fa-circle-xmark"></i>  Close Chat</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item danger" href="#"><i class="fa-regular fa-thumbs-down"></i>  Report</a></li>
    <li><a class="dropdown-item danger" id="startSecretChat" href="#"><i class="fas fa-user-secret"></i>  secret chat</a></li>
    <li><a class="dropdown-item danger" href="#"><i class="fa-regular fa-circle-xmark"></i>  Block</a></li>
    <li><a class="dropdown-item danger" href="#"><i class="fa-solid fa-circle-minus"></i>  Clear chat</a></li>
     <li><a class="dropdown-item danger" href="#"><i class="fa-solid fa-trash"></i>  Delete chat</a></li>

  
  </ul>
</div>
            </span>
            <span>
                <i class="fa-solid fa-magnifying-glass"></i>
            </span>
        </div>
    </div>
<div id="loader" style="display:block; padding: 10px; text-align:center;width: 100%;">
  <div class="spinner"></div>
</div>

             <div class="messages-container" id="messagesContainer">
            <!-- Messages will be inserted here -->
        </div>

    <!-- WhatsApp-like type bar -->
<div class="type-bar">
  <button class="icon-btn"><i class="far fa-smile" id="emoji-button"></i></button>
  <emoji-picker id="emoji-picker"></emoji-picker>
<div class="audio-recorder-container">
  <button id="micButton" class="audio-btn mic-btn" title="Start Recording">
    <i class="fa-solid fa-microphone"></i>
  </button>
  
  <div id="recordingControls" class="recording-controls" style="display: none;">
    <div class="waveform-container">
      <canvas id="waveformCanvas" width="200" height="40"></canvas>
    </div>
    
    <button id="stopButton" class="audio-btn stop-btn" title="Pause Recording">
      <i class="fa-solid fa-pause"></i>
    </button>
    <button id="resumeButton" class="audio-btn resume-btn" title="Resume Recording" style="display: none;">
      <i class="fa-solid fa-microphone"></i>
    </button>
    <span id="recordingTimer" class="timer">00:00</span>
    
    <button id="playPreviewBtn" class="audio-btn preview-btn" title="Play Preview" style="display: none;">
      <i class="fa-solid fa-play"></i>
    </button>
    <button id="deleteRecordingBtn" class="audio-btn delete-btn" title="Delete Recording">
      <i class="fa-solid fa-trash"></i>
    </button>
    <button id="sendRecordingBtn" class="audio-btn send-btn" title="Send Recording">
      <i class="fa-solid fa-paper-plane"></i>
    </button>
  </div>
</div>

<audio id="audioPreview" style="display: none;"></audio>



  <input type="text" class="type-input message-input" placeholder="Type a message" id="textMessage" />

  <!-- File input -->
  <input type="file" id="imageInput" accept="image/*" multiple style="display: none;" />
  <span id="fileName" style="margin-left:10px; font-size:0.9em; color:#888;"></span>

  <button type="button" id="paperclip-btn" class="icon-btn"><i class="fas fa-paperclip"></i></button>
  <button class="icon-btn send-btn send-button"><i class="fas fa-paper-plane"></i></button>
</div>

</div>
<!-- <div class="user-info">Hello world</div> -->


</div>



    </div>


    <!-- Add Contact Modal -->
    <div class="modal fade" id="addContactModal" tabindex="-1" aria-labelledby="addContactModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <form id="addContactForm" class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="addContactModalLabel">Add New Contact</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="mb-3">
                        <label for="contactName" class="form-label">Name</label>
                        <input type="text" class="form-control" id="contactName" required>
                    </div>
                    <div class="mb-3">
                        <label for="contactPhone" class="form-label">Phone Number</label>
                        <input type="tel" name="phone" id="contactPhone" class="form-control" required pattern="^[0-9]{10}$">
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="submit" class="btn btn-primary">Add Contact</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Toast Notification -->
    <div class="toast-notification" id="toastNotification"></div>

    <!-- Hidden image crop modal -->
<div id="imageEditModal" class="modal">
  <div class="edit-modal-content">
    <div class="modal-header">
      <h3>Edit Image</h3>
    </div>
    <div class="modal-body">
      <img id="imageToEdit" class="image-preview"/>
      <input type="text" id="imageCaption" class="caption-input" placeholder="Write a caption (optional)"/>
      <canvas id="fabricCanvas" width="400" height="300"></canvas>
      <div id="fabricControls" class="drawing-controls">
        <label class="control-label">
          <span>üñçÔ∏è Color:</span>
          <input type="color" id="fabricColor" value="#ff0000" />
        </label>
        <label class="control-label">
          <span>‚úèÔ∏è Size:</span>
          <input type="range" id="fabricBrushSize" min="1" max="20" value="5" />
        </label>
        <button id="fabricClear" class="clear-button">üßΩ Clear</button>
      </div>
    </div>
    <div class="modal-footer button-group">
      <div class="left-buttons">
        <button id="drawButton" class="draw-btn">‚úçÔ∏è Draw</button>
      </div>
      <div class="right-buttons">
        <button id="cancelEdit" class="cancel-btn">Cancel</button>
        <button id="cropButton" class="crop-btn">Crop & Send</button>
      </div>
    </div>
  </div>
</div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script type="module" src="https://cdn.jsdelivr.net/npm/emoji-picker-element@^1/index.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fabric.js/5.3.0/fabric.min.js"></script>



    <script type="module" src="/js/footer.js"></script>
</body>
</html>